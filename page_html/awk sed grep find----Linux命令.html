<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="origin">
    
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <title>小戳同学 - 博客园</title>
    
    <link rel="stylesheet" href="https://www.cnblogs.com/css/blog-common.min.css?v=sqi5FxOybx6gjGoG6Zfy1wD-0AwznLNLYOVx7Y9tIN0">
    <link id="MainCss" rel="stylesheet" href="https://www.cnblogs.com/skins/coffee/bundle-coffee.min.css?v=pdMIVgsH8kXt-vOWnlL0N20TlHt3UyP9HzGgocfsP4s">
    
    <link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="https://www.cnblogs.com/skins/coffee/bundle-coffee-mobile.min.css?v=MGucLWekW6t3A88Ks-YfEzrx4X_hEIpMacbOAC9lJUs">
    
    <link type="application/rss+xml" rel="alternate" href="https://www.cnblogs.com/xiaokuangnvhai/rss">
    <link type="application/rsd+xml" rel="EditURI" href="https://www.cnblogs.com/xiaokuangnvhai/rsd.xml">
    <link type="application/wlwmanifest+xml" rel="wlwmanifest" href="https://www.cnblogs.com/xiaokuangnvhai/wlwmanifest.xml">
    <script async="" src="https://www.google-analytics.com/analytics.js"></script><script src="https://common.cnblogs.com/scripts/jquery-2.2.0.min.js"></script>
    <script src="https://www.cnblogs.com/js/blog-common.min.js?v=ruOFvx8_pDlyiWjHGHyOXclVmNo396_IKB8YFZjMllo"></script>
    <script>
        var currentBlogId = 516754;
        var currentBlogApp = 'xiaokuangnvhai';
        var cb_enable_mathjax = false;
        var isLogined = true;
    </script>  
</head><h1 class='postTitle'><a class="postTitle2" href="https://www.cnblogs.com/xiaokuangnvhai/p/11596551.html" id="cb_post_title_url">awk sed grep find----Linux命令</a></h1<div class='postBody'><div class="blogpost-body" id="cnblogs_post_body">
<p>一、find 命令----找文件或目录</p>
<p><img alt="" src="https://img2018.cnblogs.com/blog/783015/201910/783015-20191010101530483-1091029919.png"/></p>
<div class="cnblogs_code">
<pre>1、find  /home/  -name  “test.txt”   <span style="color: #008000;">#</span><span style="color: #008000;">----在home路径下查找名字为test.txt的文件或目录</span>

2、find /home/ -name “*.txt”    <span style="color: #008000;">#</span><span style="color: #008000;">---在home路径下查找名字以.txt结尾的文件或目录</span>

3、find /home/ -name “*.txt” -type f   <span style="color: #008000;">#</span><span style="color: #008000;">---在home路径下查找名字以.txt结尾的文件</span>

4、find /home/ -name “*.txt” -type d   <span style="color: #008000;">#</span><span style="color: #008000;">---在home路径下查找名字以.txt结尾的目录</span>

5、find .  -name “*.txt” -type d   <span style="color: #008000;">#</span><span style="color: #008000;">---在当前路径下查找名字以.txt结尾的目录</span>

6、find  /home/ -name “*.txt” -type d -mtime +30  <span style="color: #008000;">#</span><span style="color: #008000;">---在home路径下查找名字以.txt结尾且30天以前建的目录</span>

7、find  /home/ -name “*.txt” -type d -mtime -1  <span style="color: #008000;">#</span><span style="color: #008000;">---在home路径下查找名字以.txt结尾且1天以内建的目录</span>

8、find /home/ -name “test.txt” | xargs rm -rf {} \;    <span style="color: #008000;">#</span><span style="color: #008000;">---在home路径下查找名字为test.txt的文件或目录并删除，其中{}为管道符前面的结果， \；是固定的写法</span>

9、find /home/ -name “test.txt” -<span style="color: #0000ff;">exec</span> cp {} /tmp/  \;   <span style="color: #008000;">#</span><span style="color: #008000;">---在home路径下查找名字为test.txt的文件或目录并复制到tmp路径下，其中{}为管道符前面的结果， \；是固定的写法，另外exec比xargs用的范围更广，建议用exec</span>

10、find /home/ -name “test.txt”  -size +10k   <span style="color: #008000;">#</span><span style="color: #008000;">---在home路径下查找名字为test.txt的文件或目录且大于10k</span>

11、find /home/ -name “test.txt”  -size +10M   <span style="color: #008000;">#</span><span style="color: #008000;">---在home路径下查找名字为test.txt的文件或目录且大于10M，注意M大写</span>

12、find /home/ -name “test.txt”  -perm 755   <span style="color: #008000;">#</span><span style="color: #008000;">---在home路径下查找名字为test.txt的文件或目录且权限为755，其中文件默认的权限为644，目录默认的权限是755</span></pre>
</div>
<p> 二、grep ---匹配文件内内容</p>
<p>备注：正则是直接在‘’中写的，条件单引号或双引号均可</p>
<p> <img alt="" src="https://img2018.cnblogs.com/blog/783015/201910/783015-20191010102041326-1329934620.png"/></p>
<div class="cnblogs_code">
<pre>1、grep “root” /etc/passwd    <span style="color: #008000;">#</span><span style="color: #008000;">----匹配passwd文件中root内容行</span>

2、grep –color “root” /etc/passwd   <span style="color: #008000;">#</span><span style="color: #008000;">----匹配passwd文件中root内容行且root标颜色</span>

3、grep  “^root” /etc/passwd  <span style="color: #008000;">#</span><span style="color: #008000;">----匹配passwd文件中root开头内容行</span>

4、grep  “root$” /etc/passwd   <span style="color: #008000;">#</span><span style="color: #008000;">----匹配passwd文件中root结尾内容行</span>

5、grep  -V “<span style="color: #008000;">#</span><span style="color: #008000;">” /etc/passwd  #----匹配passwd文件中非#内容行</span>

6、grep  -n “root” /etc/passwd   <span style="color: #008000;">#</span><span style="color: #008000;">----<span style="color: #008000;">匹配passwd文件中root内容行</span>且显示行号</span>

7、egrep “[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$” text.txt    <span style="color: #008000;">#</span><span style="color: #008000;">----匹配文件中IP</span>

8、egrep “[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$” text.txt | wc -l   <span style="color: #008000;">#</span><span style="color: #008000;">----匹配文件中IP且统计个数</span></pre>
</div>
<p> </p>
<p>三、awk ---数据统计</p>
<p>备注：awk默认是使用空格进行分割列的，如果需要特殊定义分割方式需要 -F‘’ ” 进行自定义，主要条件是单引号</p>
<p> <img alt="" src="https://img2018.cnblogs.com/blog/783015/201910/783015-20191010102635277-478609922.png"/></p>
<div class="cnblogs_code">
<pre>1、awk ‘{<span style="color: #0000ff;">print</span> $1}’  text   <span style="color: #008000;">#</span><span style="color: #008000;">----打印文件第一列</span>

2、awk ‘{<span style="color: #0000ff;">print</span> $NF}’   text    <span style="color: #008000;">#</span><span style="color: #008000;">----打印最后一列</span>

3、awk  'NF&gt;1{print $(NF-1)}'  text    <span style="color: #008000;">#</span><span style="color: #008000;">----打印倒数第二列</span>

4、awk ‘{<span style="color: #0000ff;">print</span> $1,$NF}’  text   <span style="color: #008000;">#</span><span style="color: #008000;">----打印1-最后一列</span>

5、awk ‘{<span style="color: #0000ff;">print</span> $1’:’$NF}’text    <span style="color: #008000;">#</span><span style="color: #008000;">----打印1-最后一列且中间加：号</span>

6、awk  -F”:” ‘{<span style="color: #0000ff;">print</span> $1}’ text    <span style="color: #008000;">#</span><span style="color: #008000;">----打印以冒号分割的第一列<br/><br/>7、awk -F":" -v i=1 '{print $3+i}' text #----打印第3列且加上1  -v 是定义变量<br/><br/>8、awk -F":" 'BEGIN {print "xxx"} {print $1,$7} END {print "yyyy"}' text   #-----打印1和7列且在文件第一行前加xxx,在文件的末尾加yyyy<br/><br/></span></pre>
</div>
<p> <img alt="" src="https://img2018.cnblogs.com/blog/783015/201910/783015-20191009114514478-1302462438.png"/></p>
<p> 四、sed ---编辑文本</p>
<p>备注：如果需要真实改文件，需要重定向一下，另外sed的正则在两个/之间，条件单引号</p>
<p><img alt="" src="https://img2018.cnblogs.com/blog/783015/201910/783015-20191010103013384-1152477928.png"/></p>
<div class="cnblogs_code">
<pre>1、sed  ‘s/xx/yy/1’ test.txt  &gt; test.txt    <span style="color: #008000;">#</span><span style="color: #008000;">-----替换文件中第一行的xx为yy</span>

2、sed  ‘s/xx/yy/g’   test.txt  &gt; test.txt  <span style="color: #008000;">#</span><span style="color: #008000;">-----替换文件中所有的xx为yy</span>

3、sed  ‘2a ===’ test.txt &gt;test.txt    <span style="color: #008000;">#</span><span style="color: #008000;">----在文件的第二行后增加等号行</span>

4、sed    ‘/wo/d’  test.txt &gt;test.txt     <span style="color: #008000;">#</span><span style="color: #008000;">----删除文件中包含wo的行</span>

5、sed  -e  ‘2d’ -e  ‘s/xx/yy/g’ text.txt &gt;test.txt  <span style="color: #008000;">#</span><span style="color: #008000;">删除文件第二行且把文件中所有的xx替换为yy  备注：-e 可连接多个条件</span></pre>
</div>
<p> </p>
</div></div>