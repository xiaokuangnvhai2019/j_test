<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="origin">
    
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <title>小戳同学 - 博客园</title>
    
    <link rel="stylesheet" href="https://www.cnblogs.com/css/blog-common.min.css?v=sqi5FxOybx6gjGoG6Zfy1wD-0AwznLNLYOVx7Y9tIN0">
    <link id="MainCss" rel="stylesheet" href="https://www.cnblogs.com/skins/coffee/bundle-coffee.min.css?v=pdMIVgsH8kXt-vOWnlL0N20TlHt3UyP9HzGgocfsP4s">
    
    <link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="https://www.cnblogs.com/skins/coffee/bundle-coffee-mobile.min.css?v=MGucLWekW6t3A88Ks-YfEzrx4X_hEIpMacbOAC9lJUs">
    
    <link type="application/rss+xml" rel="alternate" href="https://www.cnblogs.com/xiaokuangnvhai/rss">
    <link type="application/rsd+xml" rel="EditURI" href="https://www.cnblogs.com/xiaokuangnvhai/rsd.xml">
    <link type="application/wlwmanifest+xml" rel="wlwmanifest" href="https://www.cnblogs.com/xiaokuangnvhai/wlwmanifest.xml">
    <script async="" src="https://www.google-analytics.com/analytics.js"></script><script src="https://common.cnblogs.com/scripts/jquery-2.2.0.min.js"></script>
    <script src="https://www.cnblogs.com/js/blog-common.min.js?v=ruOFvx8_pDlyiWjHGHyOXclVmNo396_IKB8YFZjMllo"></script>
    <script>
        var currentBlogId = 516754;
        var currentBlogApp = 'xiaokuangnvhai';
        var cb_enable_mathjax = false;
        var isLogined = true;
    </script>  
</head><h1 class='postTitle'><a class="postTitle2" href="https://www.cnblogs.com/xiaokuangnvhai/p/11067163.html" id="cb_post_title_url">python-walk遍历目录及查找目录小例子</a></h1<div class='postBody'><div class="blogpost-body" id="cnblogs_post_body">
<p>1、walk遍历目录</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">import</span><span style="color: #000000;">  os

</span><span style="color: #0000ff;">for</span> cur_dir,dirs,files <span style="color: #0000ff;">in</span> os.walk(<span style="color: #800000;">'</span><span style="color: #800000;">.</span><span style="color: #800000;">'</span>): <span style="color: #008000;">#</span><span style="color: #008000;">遍历目录下的所有文件及文件夹</span>
    <span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">当前目录%s</span><span style="color: #800000;">'</span>%<span style="color: #000000;">cur_dir)
    </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">文件夹%s</span><span style="color: #800000;">'</span>%<span style="color: #000000;">dirs)
    </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">文件%s</span><span style="color: #800000;">'</span>%<span style="color: #000000;">files)


</span>/Library/Frameworks/Python.framework/Versions/3.7/bin/python3.7 /Users/dongyf/Documents/python/besttest_study/<span style="color: #000000;">test.py
当前目录.
文件夹[</span><span style="color: #800000;">'</span><span style="color: #800000;">cnz</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">.idea</span><span style="color: #800000;">'</span><span style="color: #000000;">]
文件[</span><span style="color: #800000;">'</span><span style="color: #800000;">day2.py</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">xx-20190610.log</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">day3_randompasswd.py</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">control.py</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">redom_test.py</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">test.py</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">c.txt</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">dyf.py</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">a.txt</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">classtime.py</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">study_day1.py</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">c.json</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">access.log</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">day3_goodsmanage.py</span><span style="color: #800000;">'</span><span style="color: #000000;">]
当前目录.</span>/<span style="color: #000000;">cnz
文件夹[</span><span style="color: #800000;">'</span><span style="color: #800000;">ycc</span><span style="color: #800000;">'</span><span style="color: #000000;">]
文件[</span><span style="color: #800000;">'</span><span style="color: #800000;">b.py</span><span style="color: #800000;">'</span><span style="color: #000000;">]
当前目录.</span>/cnz/<span style="color: #000000;">ycc
文件夹[]
文件[</span><span style="color: #800000;">'</span><span style="color: #800000;">a.py</span><span style="color: #800000;">'</span><span style="color: #000000;">]
当前目录.</span>/<span style="color: #000000;">.idea
文件夹[]
文件[</span><span style="color: #800000;">'</span><span style="color: #800000;">besttest_study.iml</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">workspace.xml</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">modules.xml</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">misc.xml</span><span style="color: #800000;">'</span>]</pre>
</div>
<p>2、例子：</p>
<div class="cnblogs_code">
<pre><span style="color: #800000;">'''</span><span style="color: #800000;">
# 2、写一个查找文件内容的程序
def find_content(path, key_word):
    pass
在某个目录下，找到文件内容里面包含这个关键字的文件名。
</span><span style="color: #800000;">'''</span>
<span style="color: #0000ff;">import</span><span style="color: #000000;">  os
</span><span style="color: #008000;">#</span><span style="color: #008000;">找目录下含该关键字的文件名及其路径</span>
<span style="color: #0000ff;">def</span><span style="color: #000000;"> find_content(path, key_word):
    filename </span>=<span style="color: #000000;"> []
    </span><span style="color: #0000ff;">for</span> cur_dir, dirs, files <span style="color: #0000ff;">in</span> os.walk(path): <span style="color: #008000;">#</span><span style="color: #008000;">遍历目录文件名</span>
        <span style="color: #0000ff;">for</span> name <span style="color: #0000ff;">in</span><span style="color: #000000;"> files:
            os.chdir(cur_dir) </span><span style="color: #008000;">#</span><span style="color: #008000;">切换到当前路径</span>
            r=readfile(name) <span style="color: #008000;">#</span><span style="color: #008000;">读文件内容</span>
            <span style="color: #0000ff;">if</span> key_word <span style="color: #0000ff;">in</span> r: <span style="color: #008000;">#</span><span style="color: #008000;">文件内容是否包含关键字</span>
                filename.append(name + <span style="color: #800000;">"</span>   <span style="color: #800000;">"</span> + cur_dir) <span style="color: #008000;">#</span><span style="color: #008000;">文件名及路径添加到数组</span>
    <span style="color: #0000ff;">return</span> filename  <span style="color: #008000;">#</span><span style="color: #008000;">返回数组</span>

<span style="color: #008000;">#</span><span style="color: #008000;">读文件内容函数</span>
<span style="color: #0000ff;">def</span><span style="color: #000000;"> readfile(name):
    f </span>= open(name, encoding=<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span>) <span style="color: #008000;">#</span><span style="color: #008000;">读模式打开文件</span>
    r= f.read() <span style="color: #008000;">#</span><span style="color: #008000;">读文件</span>
    f.close()  <span style="color: #008000;">#</span><span style="color: #008000;">关闭文件</span>
    <span style="color: #0000ff;">return</span>  r <span style="color: #008000;">#</span><span style="color: #008000;">返回文件内容</span>
<span style="color: #000000;">
key_word</span>=<span style="color: #800000;">'</span><span style="color: #800000;">123</span><span style="color: #800000;">'</span> <span style="color: #008000;">#</span><span style="color: #008000;">定义关键字</span>
path=r<span style="color: #800000;">'</span><span style="color: #800000;">C:\zwj\besttest\logs</span><span style="color: #800000;">'</span> <span style="color: #008000;">#</span><span style="color: #008000;">文件目录</span>
<span style="color: #0000ff;">print</span>(find_content(path,key_word)) <span style="color: #008000;">#</span><span style="color: #008000;">调取找文件关键字函数</span></pre>
</div>
<p> </p>
</div></div>